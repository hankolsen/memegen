function t(t){return t&&t.__esModule?t.default:t}var e=t(require("fs")),{copyImg:o}=require("img-clipboard"),{createCanvas:a,loadImage:n,registerFont:i}=require("canvas"),s=t(require("meow"));const m=({ctx:t,x:e,y:o,text:a,fontSize:n,fromBottom:i=!1})=>{const s=1.5*(i?-1:1);t.lineWidth=2,t.strokeStyle="black",t.mutterLine=2,t.fillStyle="white",t.textAlign="center",t.font=`bold ${n}pt Impact`;const r=s*n;let l=[],g="";a.toUpperCase().split(" ").forEach((e=>{const o=g?`${g} ${e}`:e;t.measureText(o).width>480?(l=i?[g,...l]:[...l,g],g=e):g=o})),l=i?[g,...l]:[...l,g],l.length>2?m({ctx:t,x:e,y:o,fontSize:n-5,text:a,fromBottom:i}):l.forEach(((a,n)=>{t.strokeText(a,e,o+r*n),t.fillText(a,e,o+r*n)}))},r=async({width:t=500,imagePath:s=`${__dirname}/assets/images/That-Would-Be-Great.jpg`,topText:r="",bottomText:l="",output:g=""}={})=>{const c=await n(s),{canvas:p,height:u}=(({width:t,image:e})=>{const o=e.height/e.width*t;i(`${__dirname}/assets/fonts/impact.ttf`,{family:"Impact"});const n=a(t,o),s=n.getContext("2d");return s.clearRect(0,0,t,o),s.drawImage(e,0,0,t,o),{canvas:n,height:o}})({width:t,image:c});(({canvas:t,width:e,height:o,topText:a,bottomText:n})=>{const i=e/2,s=t.getContext("2d");s.textBaseline="top",m({ctx:s,x:i,y:10,text:a,fontSize:23}),s.textBaseline="bottom",m({ctx:s,x:i,y:o-5,text:n,fontSize:23,fromBottom:!0})})({canvas:p,width:t,height:u,topText:r,bottomText:l}),o(Buffer.from(p.toBuffer(),"base64")),g&&((t,o)=>{const a=t.createPNGStream(),n=e.createWriteStream(o);a.pipe(n),n.on("finish",(()=>console.log(`...and your image is available as ${o}`)))})(p,g),console.log("Done! Just paste the content of your clipboard wherever you want the image")};exports.default=async()=>{const t=s('\n  By default the resulting meme image ends up in your clipboard. Just paste it wherever.\n\n  Usage\n    $ meme <image url>\n    \n    If no image url is given it defaults to Lumbergh.\n\n    Options\n      --toptext, -t Text at the top of the image\n      --bottomtext, -b Text at the bottom of the image\n      --output, -o The location and filename to where to save the png image (if you also want it as a file)\n    \n    Examples\n      $ meme https://imgflip.com/s/meme/One-Does-Not-Simply.jpg -t "One does not simply" -b "create a meme generator"\n      $ meme -t "if you could use my meme generator" -b "that would be great"\n      $ meme -b "That would be great" -o "./my-meme.png"\n    ',{flags:{toptext:{type:"string",alias:"t"},bottomtext:{type:"string",alias:"b"},output:{type:"string",alias:"o"}}}),e=t.input[0],o=t.flags.toptext,a=t.flags.bottomtext,{output:n}=t.flags;o||a?r({imagePath:e,topText:o,bottomText:a,output:n}):console.log(t.help)};
//# sourceMappingURL=index.js.map
